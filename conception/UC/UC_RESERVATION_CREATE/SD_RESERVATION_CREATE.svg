<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1116px" preserveAspectRatio="none" style="width:1537px;height:1116px;" version="1.1" viewBox="0 0 1537 1116" width="1537px" zoomAndPan="magnify"><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="188" x="675.25" y="24.5332">SD_RESERVATION_CREATE</text><rect fill="#FEFECE" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="156" x="681" y="155.5703"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="142" x="688" y="177.1035">:ReservationController</text><rect fill="#FEFECE" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="166" x="160.5" y="319.5859"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="152" x="167.5" y="341.1191">:ReservationCreateView</text><rect fill="#FFFFFF" height="626.8047" style="stroke: #000000; stroke-width: 2.0;" width="1512.5" x="13" y="460.25"/><rect fill="#FEFECE" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="156" x="1036" y="539.3047"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="142" x="1043" y="560.8379">:ReservationController</text><rect fill="#FFFFFF" height="60.9609" style="stroke: #000000; stroke-width: 2.0;" width="489.5" x="1026" y="588.9141"/><rect fill="#FEFECE" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="173" x="1332.5" y="607.2656"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="159" x="1339.5" y="628.7988">reservation : Reservation</text><rect fill="#FFFFFF" height="201.7188" style="stroke: #000000; stroke-width: 2.0;" width="1305" x="23" y="767.9297"/><rect fill="#FFFFFF" height="74.9609" style="stroke: none; stroke-width: 1.0;" width="1305" x="23" y="894.6875"/><rect fill="#FEFECE" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="166" x="336.5" y="896.6875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="152" x="343.5" y="918.2207">:ReservationCreateView</text><rect fill="#FFFFFF" height="110.4063" style="stroke: none; stroke-width: 1.0;" width="1512.5" x="13" y="976.6484"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="55" x2="55" y1="115.2188" y2="1104.0547"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="243.5" x2="243.5" y1="350.8906" y2="1104.0547"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="419.5" x2="419.5" y1="927.9922" y2="1104.0547"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="546.5" x2="546.5" y1="115.2188" y2="1104.0547"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="759" x2="759" y1="186.875" y2="1104.0547"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="922" x2="922" y1="115.2188" y2="1104.0547"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="995" x2="995" y1="115.2188" y2="1104.0547"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1114" x2="1114" y1="570.6094" y2="1104.0547"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1273" x2="1273" y1="115.2188" y2="1104.0547"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1418.5" x2="1418.5" y1="638.5703" y2="1104.0547"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="39" x="33" y="112.1426">Admin</text><ellipse cx="55.5" cy="44.6094" fill="#FEFECE" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M55.5,52.6094 L55.5,79.6094 M42.5,60.6094 L68.5,60.6094 M55.5,79.6094 L42.5,94.6094 M55.5,79.6094 L68.5,94.6094 " fill="none" style="stroke: #A80036; stroke-width: 2.0;"/><rect fill="#FEFECE" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="69" x="512.5" y="82.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="55" x="519.5" y="104.1426">:Routeur</text><rect fill="#FEFECE" height="49.2188" style="stroke: #A80036; stroke-width: 1.5;" width="64" x="890" y="65"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="48" x="898" y="86">«class»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="50" x="897" y="103.6094">Theater</text><rect fill="#FEFECE" height="49.2188" style="stroke: #A80036; stroke-width: 1.5;" width="62" x="964" y="65"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="48" x="971" y="86">«class»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="34" x="978" y="103.6094">Show</text><rect fill="#FEFECE" height="49.2188" style="stroke: #A80036; stroke-width: 1.5;" width="90" x="1228" y="65"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="48" x="1249" y="86">«class»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="76" x="1235" y="103.6094">Reservation</text><polygon fill="#A80036" points="535,143.5703,545,147.5703,535,151.5703,539,147.5703" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="3" x2="541" y1="147.5703" y2="147.5703"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="226" x="10" y="142.7139">[GET]/reservation/create/&lt;idCustomer&gt;</text><polygon fill="#A80036" points="669,173.9219,679,177.9219,669,181.9219,673,177.9219" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="547" x2="675" y1="177.9219" y2="177.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="110" x="554" y="173.0654">create(idCustomer)</text><rect fill="#FEFECE" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="156" x="681" y="155.5703"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="142" x="688" y="177.1035">:ReservationController</text><polygon fill="#A80036" points="910,216.5313,920,220.5313,910,224.5313,914,220.5313" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="759" x2="916" y1="220.5313" y2="220.5313"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="139" x="766" y="215.6748">getTheaters() : Theater[]</text><polygon fill="#A80036" points="770,246.8828,760,250.8828,770,254.8828,766,250.8828" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="764" x2="921" y1="250.8828" y2="250.8828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="47" x="776" y="246.0264">theaters</text><polygon fill="#A80036" points="983,277.2344,993,281.2344,983,285.2344,987,281.2344" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="759" x2="989" y1="281.2344" y2="281.2344"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="117" x="766" y="276.3779">getShows() : Show[]</text><polygon fill="#A80036" points="770,307.5859,760,311.5859,770,315.5859,766,311.5859" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="764" x2="994" y1="311.5859" y2="311.5859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="37" x="776" y="306.7295">shows</text><polygon fill="#A80036" points="337.5,337.9375,327.5,341.9375,337.5,345.9375,333.5,341.9375" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="331.5" x2="758" y1="341.9375" y2="341.9375"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="189" x="343.5" y="337.0811">new(theaters,shows,idCustomer)</text><rect fill="#FEFECE" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="166" x="160.5" y="319.5859"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="152" x="167.5" y="341.1191">:ReservationCreateView</text><polygon fill="#A80036" points="231.5,380.5469,241.5,384.5469,231.5,388.5469,235.5,384.5469" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="55.5" x2="237.5" y1="384.5469" y2="384.5469"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="164" x="62.5" y="379.6904">setTheater(theater : Theater)</text><polygon fill="#A80036" points="231.5,410.8984,241.5,414.8984,231.5,418.8984,235.5,414.8984" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="55.5" x2="237.5" y1="414.8984" y2="414.8984"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="132" x="62.5" y="410.042">setShow(show : Show)</text><polygon fill="#A80036" points="231.5,441.25,241.5,445.25,231.5,449.25,235.5,445.25" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="55.5" x2="237.5" y1="445.25" y2="445.25"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="139" x="62.5" y="440.3936">setSeats(seats : Seat[])</text><path d="M13,460.25 L74,460.25 L74,468.25 L64,478.25 L13,478.25 L13,460.25 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="626.8047" style="stroke: #000000; stroke-width: 2.0;" width="1512.5" x="13" y="460.25"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="16" x="28" y="474.7451">alt</text><polygon fill="#A80036" points="231.5,496.9531,241.5,500.9531,231.5,504.9531,235.5,500.9531" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="55.5" x2="237.5" y1="500.9531" y2="500.9531"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="50" x="62.5" y="496.0967">confirm()</text><polygon fill="#A80036" points="535,527.3047,545,531.3047,535,535.3047,539,531.3047" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="243.5" x2="541" y1="531.3047" y2="531.3047"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="242" x="250.5" y="526.4482">[GET]/reservation/create/&lt;idCustomer,...&gt;</text><polygon fill="#A80036" points="1024,557.6563,1034,561.6563,1024,565.6563,1028,561.6563" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="547" x2="1030" y1="561.6563" y2="561.6563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="56" x="554" y="556.7998">create(...)</text><rect fill="#FEFECE" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="156" x="1036" y="539.3047"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="142" x="1043" y="560.8379">:ReservationController</text><path d="M1026,588.9141 L1099,588.9141 L1099,596.9141 L1089,606.9141 L1026,606.9141 L1026,588.9141 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="60.9609" style="stroke: #000000; stroke-width: 2.0;" width="489.5" x="1026" y="588.9141"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="28" x="1041" y="603.4092">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="80" x="1114" y="602.333">[for each seat]</text><polygon fill="#A80036" points="1320.5,625.6172,1330.5,629.6172,1320.5,633.6172,1324.5,629.6172" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1114" x2="1326.5" y1="629.6172" y2="629.6172"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="43" x="1121" y="624.7607">new(...)</text><rect fill="#FEFECE" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="173" x="1332.5" y="607.2656"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="159" x="1339.5" y="628.7988">reservation : Reservation</text><polygon fill="#A80036" points="1261,675.2266,1271,679.2266,1261,683.2266,1265,679.2266" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1114" x2="1267" y1="679.2266" y2="679.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="135" x="1121" y="674.3701">validateAll(reservations)</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1273" x2="1315" y1="709.5781" y2="709.5781"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1315" x2="1315" y1="709.5781" y2="722.5781"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1274" x2="1315" y1="722.5781" y2="722.5781"/><polygon fill="#A80036" points="1284,718.5781,1274,722.5781,1284,726.5781,1280,722.5781" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="132" x="1280" y="704.7217">findConflicts() : String[]</text><polygon fill="#A80036" points="1125,748.9297,1115,752.9297,1125,756.9297,1121,752.9297" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1119" x2="1272" y1="752.9297" y2="752.9297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="33" x="1131" y="748.0732">errors</text><path d="M23,767.9297 L84,767.9297 L84,775.9297 L74,785.9297 L23,785.9297 L23,767.9297 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="201.7188" style="stroke: #000000; stroke-width: 2.0;" width="1305" x="23" y="767.9297"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="16" x="38" y="782.4248">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="70" x="99" y="781.3486">[errors == []]</text><polygon fill="#A80036" points="1261,804.6328,1271,808.6328,1261,812.6328,1265,808.6328" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1114" x2="1267" y1="808.6328" y2="808.6328"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="118" x="1121" y="803.7764">saveAll(reservations)</text><polygon fill="#A80036" points="558,834.9844,548,838.9844,558,842.9844,554,838.9844" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="552" x2="1113" y1="838.9844" y2="838.9844"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="207" x="564" y="834.1279">[GET]/reservation/list/&lt;idCustomer&gt;</text><rect fill="#FFFFFF" height="42.7031" style="stroke: #000000; stroke-width: 2.0;" width="158" x="509.5" y="846.9844"/><polygon fill="#EEEEEE" points="509.5,846.9844,571.5,846.9844,571.5,854.9844,561.5,864.9844,509.5,864.9844,509.5,846.9844" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="522.5" y="862.4795">ref</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="150" x="513.5" y="882.4795">SD_RESERVATION_LIST</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="23" x2="1328" y1="895.6875" y2="895.6875"/><polygon fill="#A80036" points="513.5,915.0391,503.5,919.0391,513.5,923.0391,509.5,919.0391" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="507.5" x2="1113" y1="919.0391" y2="919.0391"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="68" x="519.5" y="914.1826">new (errors)</text><rect fill="#FEFECE" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="166" x="336.5" y="896.6875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="152" x="343.5" y="918.2207">:ReservationCreateView</text><polygon fill="#A80036" points="407.5,957.6484,417.5,961.6484,407.5,965.6484,411.5,961.6484" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="55.5" x2="413.5" y1="961.6484" y2="961.6484"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="52" x="62.5" y="956.792">/* retry */</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="13" x2="1525.5" y1="977.6484" y2="977.6484"/><polygon fill="#A80036" points="231.5,997,241.5,1001,231.5,1005,235.5,1001" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="55.5" x2="237.5" y1="1001" y2="1001"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="46" x="62.5" y="996.1436">cancel()</text><polygon fill="#A80036" points="535,1027.3516,545,1031.3516,535,1035.3516,539,1031.3516" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="243.5" x2="541" y1="1031.3516" y2="1031.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="207" x="250.5" y="1026.4951">[GET]/reservation/list/&lt;idCustomer&gt;</text><rect fill="#FFFFFF" height="42.7031" style="stroke: #000000; stroke-width: 2.0;" width="158" x="509.5" y="1039.3516"/><polygon fill="#EEEEEE" points="509.5,1039.3516,571.5,1039.3516,571.5,1047.3516,561.5,1057.3516,509.5,1057.3516,509.5,1039.3516" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="522.5" y="1054.8467">ref</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="150" x="513.5" y="1074.8467">SD_RESERVATION_LIST</text><!--
@startuml SD_RESERVATION_CREATE

    title SD_RESERVATION_CREATE
    hide footbox
    skinparam shadowing false

    Actor "Admin" as A
    Participant ":ReservationCreateView" as RCV
    Participant ":ReservationCreateView" as RCV1
    Participant ":Routeur" as R
    Participant ":ReservationController" as RC
    Participant "Theater" as TC<<class>>
    Participant "Show" as SC<<class>>
      Participant ":ReservationController" as RC1
      Participant "Reservation" as CR <<class>>
      Participant "reservation : Reservation" as r

    - -> R : [GET]/reservation/create/<idCustomer>
    create RC
    R -> RC : create(idCustomer)
    RC -> TC : getTheaters() : Theater[]
    TC - -> RC : theaters
    RC ->  SC : getShows() : Show[]
    SC -> RC : shows
    create RCV 
    RC -> RCV : new(theaters,shows,idCustomer)
    A -> RCV : setTheater(theater : Theater)
    A -> RCV : setShow(show : Show)
    A -> RCV : setSeats(seats : Seat[])
    alt 
    A -> RCV : confirm()
    RCV -> R : [GET]/reservation/create/<idCustomer,...>
    create RC1
    R -> RC1 : create(...)
    loop for each seat 
    create r
    RC1 -> r : new(...)
    end 
    RC1 ->  CR : validateAll(reservations)
    CR -> CR : findConflicts() : String[]
    CR - -> RC1 : errors
    alt errors == []
    RC1 -> CR : saveAll(reservations)
    RC1 -> R : [GET]/reservation/list/<idCustomer>
    ref over R : SD_RESERVATION_LIST
    else 
    create RCV1 
    RC1 -> RCV1 : new (errors)
    A -> RCV1 : /* retry */
    end
    else 
    A -> RCV : cancel()
    RCV -> R : [GET]/reservation/list/<idCustomer>
    ref over R : SD_RESERVATION_LIST
    end 


    

  
@enduml

PlantUML version 1.2019.09(Mon Aug 26 18:19:51 CEST 2019)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.8.0_221-b11
Operating System: Windows 10
OS Version: 10.0
Default Encoding: Cp1252
Language: fr
Country: BE
--></g></svg>